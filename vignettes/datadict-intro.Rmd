---
title: "Introduction to datadict"
output: rmarkdown::html_vignette
description: >
  This document introduces you to the package's 'generate_dict()' function.
vignette: >
  %\VignetteIndexEntry{Introduction to datadict}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Overview

**datadict** is an R package that provides a clean, consistent summary of a data frame or tibble's structure. Through its core function, `generate_dict()`, the package automates the extraction of variable metadata, including names, labels, data types, and distributions (such as unique values, value labels, and numeric ranges), producing a standardized reference that simplifies data exploration and documentation.

To begin working with **datadict**, load the package:

```{r, setup}
library(datadict)
```

## Generating a data dictionary

To generate a data dictionary, pass your data frame into the `data` argument of the `generate_dict()` function. This produces a tibble summarizing every column in your dataset

``` {r, gss_all_cols}
generate_dict(data = gss)
```

To build a dictionary for specific variables in your dataset, pass a character vector of column names to the `columns` argument

``` {r, gss_select_cols}
generate_dict(
  data = gss, 
  columns = c("age", "sexnow1", "hispanic", "race", "martial")
)
```

Use the `n_max` argument to set the threshold for how numeric variables are displayed. If a variable has fewer unique values than `n_max`, every value is shown individually in the data dictionary. Once that limit is exceeded, the values are automatically summarized into a range:

``` {r, birth_ord}
set.seed(0721)
sample_data <- data.frame(
  id = sample(1:10000, size = 100, replace = FALSE),
  gender = sample(c("woman", "man", "non-binary", NA), size = 100, replace = TRUE),
  birth_order = sample(c(1:10, NA), size = 10000, replace = TRUE)
)

generate_dict(data = sample_data, n_max = 5)
generate_dict(data = sample_data, n_max = 10L)
```

Set the character limit for labels in the data dictionary using the `label_width` argument. This ensures long text doesn't disrupt the table layout. By default, the dictionary shows up to 100 characters.

``` {r, label_exs}
long_labels <- generate_dict(data = gss) 
unique(long_labels$variable_label)

shortened_labels <- generate_dict(data = gss, label_width = 15)
unique(shortened_labels$variable_label)
```

Any variables containing only missing data (`NA`) are omitted from the final dictionary. The function will notify you of these exclusions by printing the variable names to the console.

```{r, all_na}
set.seed(0803)
sample_data2 <- data.frame(
  id = sample(1:100, size = 100, replace = FALSE),
  empty_col = NA,
  non_empty_col1 = "",
  non_empty_col2 = sample(c("Yes", "No", "Maybe", NA), size = 100, replace = TRUE),
  non_empty_col3 = sample(c("", NA), size = 100, replace = TRUE)
)

generate_dict(data = sample_data2, n_max = 5)
```

Use the `label_fallback` argument to provide a placeholder for variables that lack a formal label. If left unspecified, this defaults to `NO QUESTION LABEL`.

``` {r, fallback}
generate_dict(data = nlsy)

generate_dict(data = nlsy, label_fallback = "None provided")
```


